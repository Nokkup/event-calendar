(this["webpackJsonptodo-calendar"]=this["webpackJsonptodo-calendar"]||[]).push([[0],{310:function(e,t){},344:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(37),a=n.n(c),i=n(42),s=n(80),o=n(158),u=n(194),j=n(40),l="SET_AUTH",b="SET_IS_LOADING",d="SET_ERROR",O="SET_USER",h="SET_EVENTS",f="ADD_EVENT",p={isAuth:!1,isLoading:!1,user:{},error:""};var x=n(57),m={events:[]};var v,g,y,w,E={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(j.a)(Object(j.a)({},e),{},{isAuth:t.payload,isLoading:!1});case O:return Object(j.a)(Object(j.a)({},e),{},{user:t.payload});case b:return Object(j.a)(Object(j.a)({},e),{},{isLoading:t.payload});case d:return Object(j.a)(Object(j.a)({},e),{},{error:t.payload,isLoading:!1});default:return e}},event:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(j.a)(Object(j.a)({},e),{},{events:t.payload});case f:return Object(j.a)(Object(j.a)({},e),{},{events:[].concat(Object(x.a)(e.events),[t.payload])});default:return e}}},I=Object(o.b)(E),S=Object(o.c)(I,Object(o.a)(u.a)),k=n(347),C=n(3),A=n.n(C),T=n(9),L=n(100),Y=n(195),D=n(90),F=Object(Y.a)({apiKey:"AIzaSyB2E558TemYWU1CSdFvpCmApx7yvjijVnE",authDomain:"fir-event-calendar.firebaseapp.com",projectId:"fir-event-calendar",storageBucket:"fir-event-calendar.appspot.com",messagingSenderId:"997548526244",appId:"1:997548526244:web:5c895d4b66b9ce28b4f431",databaseURL:"https://fir-event-calendar-default-rtdb.europe-west1.firebasedatabase.app"}),M=Object(L.a)(F),R=Object(D.c)(F),U=Object(D.d)(R),_={setUser:function(e){return{type:O,payload:e}},setIsAuth:function(e){return{type:l,payload:e}},setIsLoading:function(e){return{type:b,payload:e}},setError:function(e){return{type:d,payload:e}},login:function(e,t){return function(){var n=Object(T.a)(A.a.mark((function n(r){return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r(_.setIsLoading(!0)),Object(L.c)(M,e,t).then((function(e){var t=e.user;r(_.setUser({email:t.email,uid:t.uid})),r(_.setIsAuth(!0)),r(_.setError("")),r(_.setIsLoading(!1))})).catch((function(e){r(_.setError("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"))}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M.signOut(),t(_.setUser({})),t(_.setIsAuth(!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},q=n(36),P=n(34),z=n(206),N=n(24),V=n(111),B=n(353),G=n(356),H=n(110),J=n(74),K=n(211),W=n(81),Q=n(349),X=n(56),Z=n.n(X),$=n(82),ee=n(12),te=$.a.ul(v||(v=Object(W.a)(["\n    margin: 0;\n    padding: 0;\n    list-style: inside;\n    list-style-type: circle;\n\n    li {\n        width: 100%;\n        overflow: hidden;\n        font-size: 14px;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n\n    .past-date {\n        color: lightblue;\n    }\n\n    .future-date {\n        color: blue;\n    }\n"]))),ne=function(e){var t=e.events,n=Object(r.useState)(!1),c=Object(P.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),o=Object(P.a)(s,2),u=o[0],j=o[1];return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(Q.a,{fullscreen:!0,style:{width:"800px"},dateCellRender:function(e){var n=e.format("YYYY-MM-DD"),r=t.filter((function(e){return e.date===n})),c=e.isSameOrBefore(Z()());return Object(ee.jsx)(te,{children:r.map((function(e,t){return Object(ee.jsx)("li",{className:c?"past-date":"future-date",children:e.description},t)}))})},onSelect:function(e){var n=e.format("YYYY-MM-DD"),r=t.filter((function(e){return e.date===n}));r.length>0&&(i(!0),j(r))}}),Object(ee.jsx)(B.a,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043e\u0431\u044b\u0442\u0438\u0439",visible:a,footer:null,onCancel:function(){return i(!1)},children:Object(ee.jsx)("ul",{children:u.map((function(e,t){return Object(ee.jsx)("li",{children:e.description},t)}))})})]})},re=n(350),ce=n(352),ae=n(351),ie=function(e){var t=e.submit,n=Object(r.useState)({date:"",description:""}),c=Object(P.a)(n,2),a=c[0],i=c[1];return Object(ee.jsxs)(re.a,{onFinish:function(){return t(a)},labelCol:{span:6},children:[Object(ee.jsx)(re.a.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",name:"decription",rules:[{required:!0,message:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"}],children:Object(ee.jsx)(ce.a.TextArea,{rows:5,value:a.description,onChange:function(e){return i(Object(j.a)(Object(j.a)({},a),{},{description:e.target.value}))}})}),Object(ee.jsx)(re.a.Item,{label:"\u0414\u0430\u0442\u0430:",name:"date",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443"},function(e){e.getFieldValue;return{validator:function(e,t){return t.isSameOrAfter(Z()())?Promise.resolve():Promise.reject(new Error("\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u0430\u044f \u0434\u0430\u0442\u0430 \u0443\u0436\u0435 \u043f\u0440\u043e\u0448\u043b\u0430"))}}}],children:Object(ee.jsx)(ae.a,{onChange:function(e){return function(e){e&&i(Object(j.a)(Object(j.a)({},a),{},{date:e.format("YYYY-MM-DD")}))}(e)}})}),Object(ee.jsx)(V.a,{justify:"end",children:Object(ee.jsx)(re.a.Item,{children:Object(ee.jsx)(J.a,{type:"primary",htmlType:"submit",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})})})]})},se=n(172),oe={setEvents:function(e){return{type:h,payload:e}},addEvent:function(e){return{type:f,payload:e}},uploadEvents:function(e,t,n){return function(){var r=Object(T.a)(A.a.mark((function r(c){var a;return A.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:try{a=Object(se.MD5)(e.email).toString(),Object(D.e)(Object(D.d)(R,a),{events:[].concat(Object(x.a)(t),[n])}),c(oe.addEvent(n))}catch(i){console.error(i)}case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},getEvents:function(e){return function(){var t=Object(T.a)(A.a.mark((function t(n){var r,c;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=[],c=Object(se.MD5)(e.email).toString(),t.next=5,Object(D.b)(Object(D.a)(U,c)).then((function(e){e.exists()&&(r=e.val().events)})).catch((function(e){console.error(e)}));case 5:n(oe.setEvents(r)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}},ue=(n(335),n(201)),je=n.n(ue),le=function(){var e=Object(i.b)(),t=Object(r.useState)(!1),n=Object(P.a)(t,2),c=n[0],a=n[1],s=Object(i.c)((function(e){return e.event})).events,o=Object(i.c)((function(e){return e.auth})).user;Object(r.useEffect)((function(){e(oe.getEvents(o))}),[]);return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(k.a,{children:Object(ee.jsxs)(N.a,{locale:je.a,children:[Object(ee.jsx)(V.a,{justify:"center",children:Object(ee.jsx)(ne,{events:s})}),Object(ee.jsx)(V.a,{justify:"center"}),Object(ee.jsx)(B.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435",visible:c,footer:null,onCancel:function(){return a(!1)},children:Object(ee.jsx)(ie,{submit:function(t){a(!1),e(oe.uploadEvents(o,s,t)),z.b.success("\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e")}})})]})}),Object(ee.jsx)(G.a,{style:{position:"fixed",bottom:20,right:20},children:Object(ee.jsx)(H.a,{placement:"left",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435",children:Object(ee.jsx)(J.a,{type:"primary",size:"large",shape:"circle",onClick:function(){return a(!c)},icon:Object(ee.jsx)(K.a,{})})})})]})},be=n(348),de=function(){var e=Object(i.c)((function(e){return e.auth})),t=e.error,n=e.isLoading,c=Object(r.useState)(""),a=Object(P.a)(c,2),o=a[0],u=a[1],j=Object(r.useState)(""),l=Object(P.a)(j,2),b=l[0],d=l[1],O=Object(r.createRef)(),h=Object(i.b)();return Object(ee.jsxs)(re.a,{name:"login",ref:O,onFinish:function(){h(_.login(o,b))},children:[t&&(z.b.error(t),void h(_.setError(""))),Object(ee.jsx)(re.a.Item,{name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email"}],children:Object(ee.jsx)(ce.a,{value:o,onChange:function(e){return u(e.target.value)},placeholder:"Email"})}),Object(ee.jsx)(re.a.Item,{name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}],children:Object(ee.jsx)(ce.a.Password,{value:b,placeholder:"Password",onChange:function(e){return d(e.target.value)}})}),Object(ee.jsxs)(re.a.Item,{children:[Object(ee.jsx)(J.a,{type:"primary",htmlType:"submit",loading:n,style:{width:"100%"},children:"Login"}),Object(ee.jsx)("span",{children:"Or "}),Object(ee.jsx)(s.b,{to:"/registration",children:"register"})]}),Object(ee.jsx)(H.a,{title:"\u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",children:Object(ee.jsx)(J.a,{type:"dashed",htmlType:"button",onClick:function(){return function(){var e="test@test.test",t="testpass";O.current.setFieldsValue({email:e,password:t}),u(e),d(t)}()},children:"test user"})})]})},Oe=$.a.div(g||(g=Object(W.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: calc(100vh - 128px);\n"]))),he=function(){return Object(ee.jsx)(k.a,{children:Object(ee.jsx)(Oe,{children:Object(ee.jsx)(be.a,{children:Object(ee.jsx)(de,{})})})})},fe=n(127),pe=function(){var e=Object(r.useState)(""),t=Object(P.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(P.a)(a,2),u=o[0],j=o[1],l=Object(i.b)();return Object(ee.jsxs)(re.a,{name:"registration",onFinish:function(){Object(fe.a)(M,n,u).then((function(e){l(_.login(n,u))})).catch((function(e){z.b.error(e.message)}))},children:[Object(ee.jsx)(re.a.Item,{name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email"}],children:Object(ee.jsx)(ce.a,{value:n,onChange:function(e){return c(e.target.value)},placeholder:"Email"})}),Object(ee.jsx)(re.a.Item,{name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}],children:Object(ee.jsx)(ce.a.Password,{value:u,placeholder:"Password",onChange:function(e){return j(e.target.value)}})}),Object(ee.jsxs)(re.a.Item,{children:[Object(ee.jsx)(J.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Registration"}),Object(ee.jsx)("span",{children:"Or "}),Object(ee.jsx)(s.b,{to:"/login",children:"login"})]})]})},xe=$.a.div(y||(y=Object(W.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: calc(100vh - 128px);\n"]))),me=function(){return Object(ee.jsx)(k.a,{children:Object(ee.jsx)(xe,{children:Object(ee.jsx)(be.a,{children:Object(ee.jsx)(pe,{})})})})},ve=function(){return Object(i.c)((function(e){return e.auth})).isAuth?Object(ee.jsxs)(q.d,{children:[Object(ee.jsx)(q.b,{path:"/",exact:!0,component:le}),Object(ee.jsx)(q.a,{to:"/"})]}):Object(ee.jsxs)(q.d,{children:[Object(ee.jsx)(q.b,{path:"/registration",exact:!0,component:me}),Object(ee.jsx)(q.b,{path:"/login",exact:!0,component:he}),Object(ee.jsx)(q.a,{to:"/login"})]})},ge=n(357),ye=n(354),we=n(355),Ee=n(358),Ie=$.a.div(w||(w=Object(W.a)(["\n    color: white;\n    max-width: 160px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]))),Se=function(){var e=Object(q.g)(),t=Object(i.b)(),n=Object(i.c)((function(e){return e.auth})),r=n.isAuth,c=n.user;return Object(ee.jsx)(k.a.Header,{children:Object(ee.jsx)(V.a,{justify:"end",children:r?Object(ee.jsxs)(ge.b,{children:[Object(ee.jsx)(ye.a,{icon:Object(ee.jsx)(Ee.a,{})}),Object(ee.jsx)(Ie,{children:c.email}),Object(ee.jsx)(we.a,{theme:"dark",mode:"horizontal",selectable:!1,children:Object(ee.jsx)(we.a.Item,{onClick:function(){return t(_.logout())},children:"Logout"},1)})]}):Object(ee.jsx)(we.a,{theme:"dark",mode:"horizontal",selectable:!1,children:Object(ee.jsx)(we.a.Item,{onClick:function(){return e.push("/login")},children:"Login"},2)})})})},ke=function(){var e=Object(i.b)();return Object(r.useEffect)((function(){Object(L.b)(M,(function(t){t&&(e(_.setUser({email:t.email,uid:t.uid})),e(_.setIsAuth(!0)))}))})),Object(ee.jsxs)(k.a,{children:[Object(ee.jsx)(Se,{}),Object(ee.jsx)(k.a.Content,{children:Object(ee.jsx)(ve,{})}),Object(ee.jsxs)(k.a.Footer,{style:{textAlign:"center"},children:[Object(ee.jsx)("span",{children:" \xa92021 "}),Object(ee.jsx)("a",{href:"https://github.com/Nokkup/event-calendar",children:"Github link"})]})]})};n(343);a.a.render(Object(ee.jsx)(i.a,{store:S,children:Object(ee.jsx)(s.a,{children:Object(ee.jsx)(ke,{})})}),document.getElementById("root"))}},[[344,1,2]]]);
//# sourceMappingURL=main.fce6156c.chunk.js.map